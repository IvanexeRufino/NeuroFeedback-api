//# sourceMappingURL=jquery.form.js.map
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(b){function z(a){var d=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(d))}function v(a){var d=a.target,c=b(d);if(!c.is("[type=submit],[type=image]")){d=c.closest("[type=submit]");if(0===d.length)return;d=d[0]}var f=this;f.clk=d;"image"==d.type&&(void 0!==a.offsetX?(f.clk_x=a.offsetX,f.clk_y=a.offsetY):"function"==typeof b.fn.offset?(c=c.offset(),
f.clk_x=a.pageX-c.left,f.clk_y=a.pageY-c.top):(f.clk_x=a.pageX-d.offsetLeft,f.clk_y=a.pageY-d.offsetTop));setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function q(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var B,C;B=void 0!==b("<input type='file'/>").get(0).files;C=void 0!==window.FormData;var F=!!b.fn.prop;b.fn.attr2=function(){if(!F)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"===typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function d(d){d=b.param(d,a.traditional).split("&");var f=d.length,h=[],g,c;for(g=0;g<f;g++)d[g]=d[g].replace(/\+/g," "),c=d[g].split("="),h.push([decodeURIComponent(c[0]),decodeURIComponent(c[1])]);return h}function c(f){for(var g=new FormData,c=0;c<f.length;c++)g.append(f[c].name,f[c].value);if(a.extraData)for(f=d(a.extraData),c=0;c<f.length;c++)f[c]&&
g.append(f[c][0],f[c][1]);a.data=null;c=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});a.uploadProgress&&(c.xhr=function(){var c=b.ajaxSettings.xhr();c.upload&&c.upload.addEventListener("progress",function(b){var e=0,c=b.loaded||b.position,f=b.total;b.lengthComputable&&(e=Math.ceil(c/f*100));a.uploadProgress(b,c,f,e)},!1);return c});c.data=null;var l=c.beforeSend;c.beforeSend=function(b,c){c.data=a.formData?a.formData:g;l&&l.call(this,b,c)};return b.ajax(c)}
function f(c){function f(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){q("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){q("cannot get iframe.contentDocument: "+c),b=a.document}return b}function d(){function a(){try{var b=f(w).readyState;q("state = "+b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(c){q("Server abort: ",c," (",c.name,")"),g(2),v&&clearTimeout(v),v=void 0}}var c=n.attr2("target"),
k=n.attr2("action"),m=n.attr("enctype")||n.attr("encoding")||"multipart/form-data";l.setAttribute("target",t);h&&!/post/i.test(h)||l.setAttribute("method","POST");k!=e.url&&l.setAttribute("action",e.url);e.skipEncodingOverride||h&&!/post/i.test(h)||n.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&(v=setTimeout(function(){z=!0;g(1)},e.timeout));var r=[];try{if(e.extraData)for(var p in e.extraData)e.extraData.hasOwnProperty(p)&&(b.isPlainObject(e.extraData[p])&&e.extraData[p].hasOwnProperty("name")&&
e.extraData[p].hasOwnProperty("value")?r.push(b('<input type="hidden" name="'+e.extraData[p].name+'">').val(e.extraData[p].value).appendTo(l)[0]):r.push(b('<input type="hidden" name="'+p+'">').val(e.extraData[p]).appendTo(l)[0]));e.iframeTarget||x.appendTo("body");w.attachEvent?w.attachEvent("onload",g):w.addEventListener("load",g,!1);setTimeout(a,15);try{l.submit()}catch(u){document.createElement("form").submit.apply(l)}}finally{l.setAttribute("action",k),l.setAttribute("enctype",m),c?l.setAttribute("target",
c):n.removeAttr("target"),b(r).remove()}}function g(a){if(!k.aborted&&!C)if(r=f(w),r||(q("cannot access response document"),a=2),1===a&&k)k.abort("timeout"),y.reject(k,"timeout");else if(2==a&&k)k.abort("server abort"),y.reject(k,"error","server abort");else if(r&&r.location.href!=e.iframeSrc||z){w.detachEvent?w.detachEvent("onload",g):w.removeEventListener("load",g,!1);a="success";var c;try{if(z)throw"timeout";var d="xml"==e.dataType||r.XMLDocument||b.isXMLDoc(r);q("isXml="+d);if(!d&&window.opera&&
(null===r.body||!r.body.innerHTML)&&--B){q("requeing onLoad callback, DOM not available");setTimeout(g,250);return}var h=r.body?r.body:r.documentElement;k.responseText=h?h.innerHTML:null;k.responseXML=r.XMLDocument?r.XMLDocument:r;d&&(e.dataType="xml");k.getResponseHeader=function(a){return{"content-type":e.dataType}[a.toLowerCase()]};h&&(k.status=Number(h.getAttribute("status"))||k.status,k.statusText=h.getAttribute("statusText")||k.statusText);var l=(e.dataType||"").toLowerCase(),m=/(json|script|text)/.test(l);
if(m||e.textarea){var n=r.getElementsByTagName("textarea")[0];if(n)k.responseText=n.value,k.status=Number(n.getAttribute("status"))||k.status,k.statusText=n.getAttribute("statusText")||k.statusText;else if(m){var p=r.getElementsByTagName("pre")[0],t=r.getElementsByTagName("body")[0];p?k.responseText=p.textContent?p.textContent:p.innerText:t&&(k.responseText=t.textContent?t.textContent:t.innerText)}}else"xml"==l&&!k.responseXML&&k.responseText&&(k.responseXML=E(k.responseText));try{A=G(k,l,e)}catch(D){a=
"parsererror",k.error=c=D||a}}catch(D){q("error caught: ",D),a="error",k.error=c=D||a}k.aborted&&(q("upload aborted"),a=null);k.status&&(a=200<=k.status&&300>k.status||304===k.status?"success":"error");"success"===a?(e.success&&e.success.call(e.context,A,"success",k),y.resolve(k.responseText,"success",k),u&&b.event.trigger("ajaxSuccess",[k,e])):a&&(void 0===c&&(c=k.statusText),e.error&&e.error.call(e.context,k,a,c),y.reject(k,"error",c),u&&b.event.trigger("ajaxError",[k,e,c]));u&&b.event.trigger("ajaxComplete",
[k,e]);u&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,k,a);C=!0;e.timeout&&clearTimeout(v);setTimeout(function(){e.iframeTarget?x.attr("src",e.iframeSrc):x.remove();k.responseXML=null},100)}}var l=n[0],m,e,u,t,x,w,k,z,v,y=b.Deferred();y.abort=function(a){k.abort(a)};if(c)for(m=0;m<p.length;m++)c=b(p[m]),F?c.prop("disabled",!1):c.removeAttr("disabled");e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;t="jqFormIO"+(new Date).getTime();e.iframeTarget?(x=b(e.iframeTarget),
(m=x.attr2("name"))?t=m:x.attr2("name",t)):(x=b('<iframe name="'+t+'" src="'+e.iframeSrc+'" />'),x.css({position:"absolute",top:"-1000px",left:"-1000px"}));w=x[0];k={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";q("aborting upload... "+c);this.aborted=1;try{w.contentWindow.document.execCommand&&w.contentWindow.document.execCommand("Stop")}catch(d){}x.attr("src",
e.iframeSrc);k.error=c;e.error&&e.error.call(e.context,k,c,a);u&&b.event.trigger("ajaxError",[k,e,c]);e.complete&&e.complete.call(e.context,k,c)}};(u=e.global)&&0===b.active++&&b.event.trigger("ajaxStart");u&&b.event.trigger("ajaxSend",[k,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,k,e))return e.global&&b.active--,y.reject(),y;if(k.aborted)return y.reject(),y;(c=l.clk)&&(m=c.name)&&!c.disabled&&(e.extraData=e.extraData||{},e.extraData[m]=c.value,"image"==c.type&&(e.extraData[m+".x"]=l.clk_x,
e.extraData[m+".y"]=l.clk_y));c=b("meta[name=csrf-token]").attr("content");(m=b("meta[name=csrf-param]").attr("content"))&&c&&(e.extraData=e.extraData||{},e.extraData[m]=c);e.forceSync?d():setTimeout(d,10);var A,r,B=50,C,E=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},H=b.parseJSON||function(a){return window.eval("("+
a+")")},G=function(a,c,e){var d=a.getResponseHeader("content-type")||"",f="xml"===c||!c&&0<=d.indexOf("xml");a=f?a.responseXML:a.responseText;f&&"parsererror"===a.documentElement.nodeName&&b.error&&b.error("parsererror");e&&e.dataFilter&&(a=e.dataFilter(a,c));"string"===typeof a&&("json"===c||!c&&0<=d.indexOf("json")?a=H(a):("script"===c||!c&&0<=d.indexOf("javascript"))&&b.globalEval(a));return a};return y}if(!this.length)return q("ajaxSubmit: skipping submit process - no element selected"),this;
var h,g,n=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});h=a.type||this.attr2("method");g=a.url||this.attr2("action");(g=(g="string"===typeof g?b.trim(g):"")||window.location.href||"")&&(g=(g.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:g,success:b.ajaxSettings.success,type:h||b.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);g={};this.trigger("form-pre-serialize",[this,a,g]);if(g.veto)return q("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),
this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return q("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=a.traditional;void 0===m&&(m=b.ajaxSettings.traditional);var p=[],l,u=this.formToArray(a.semantic,p);a.data&&(a.extraData=a.data,l=b.param(a.data,m));if(a.beforeSubmit&&!1===a.beforeSubmit(u,this,a))return q("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[u,this,a,g]);if(g.veto)return q("ajaxSubmit: submit vetoed via form-submit-validate trigger"),
this;g=b.param(u,m);l&&(g=g?g+"&"+l:l);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+g,a.data=null):a.data=g;var t=[];a.resetForm&&t.push(function(){n.resetForm()});a.clearForm&&t.push(function(){n.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var z=a.success||function(){};t.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(z,arguments)})}else a.success&&t.push(a.success);a.success=function(b,c,d){for(var f=a.context||this,g=0,h=t.length;g<
h;g++)t[g].apply(f,[b,c,d||n,n])};if(a.error){var v=a.error;a.error=function(b,c,d){v.apply(a.context||this,[b,c,d,n])}}if(a.complete){var E=a.complete;a.complete=function(b,c){E.apply(a.context||this,[b,c,n])}}l=0<b("input[type=file]:enabled",this).filter(function(){return""!==b(this).val()}).length;g="multipart/form-data"==n.attr("enctype")||"multipart/form-data"==n.attr("encoding");m=B&&C;q("fileAPI :"+m);var A;!1!==a.iframe&&(a.iframe||(l||g)&&!m)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){A=
f(u)}):A=f(u):A=(l||g)&&m?c(u):b.ajax(a);n.removeData("jqxhr").data("jqxhr",A);for(l=0;l<p.length;l++)p[l]=null;this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){a=a||{};a.delegation=a.delegation&&b.isFunction(b.fn.on);if(!a.delegation&&0===this.length){var d=this.selector,c=this.context;if(!b.isReady&&d)return q("DOM not ready, queuing ajaxForm"),b(function(){b(d,c).ajaxForm(a)}),this;q("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));
return this}return a.delegation?(b(document).off("submit.form-plugin",this.selector,z).off("click.form-plugin",this.selector,v).on("submit.form-plugin",this.selector,a,z).on("click.form-plugin",this.selector,a,v),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,z).bind("click.form-plugin",a,v)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,d){var c=[];if(0===this.length)return c;var f=this[0],h=this.attr("id"),g=a?f.getElementsByTagName("*"):
f.elements;g&&!/MSIE [678]/.test(navigator.userAgent)&&(g=b(g).get());h&&(h=b(':input[form="'+h+'"]').get(),h.length&&(g=(g||[]).concat(h)));if(!g||!g.length)return c;var n,m,p,l,q;n=0;for(q=g.length;n<q;n++)if(l=g[n],(h=l.name)&&!l.disabled)if(a&&f.clk&&"image"==l.type)f.clk==l&&(c.push({name:h,value:b(l).val(),type:l.type}),c.push({name:h+".x",value:f.clk_x},{name:h+".y",value:f.clk_y}));else if((p=b.fieldValue(l,!0))&&p.constructor==Array)for(d&&d.push(l),m=0,l=p.length;m<l;m++)c.push({name:h,
value:p[m]});else if(B&&"file"==l.type)if(d&&d.push(l),p=l.files,p.length)for(m=0;m<p.length;m++)c.push({name:h,value:p[m],type:l.type});else c.push({name:h,value:"",type:l.type});else null!==p&&"undefined"!=typeof p&&(d&&d.push(l),c.push({name:h,value:p,type:l.type,required:l.required}));!a&&f.clk&&(a=b(f.clk),d=a[0],(h=d.name)&&!d.disabled&&"image"==d.type&&(c.push({name:h,value:a.val()}),c.push({name:h+".x",value:f.clk_x},{name:h+".y",value:f.clk_y})));return c};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};
b.fn.fieldSerialize=function(a){var d=[];this.each(function(){var c=this.name;if(c){var f=b.fieldValue(this,a);if(f&&f.constructor==Array)for(var h=0,g=f.length;h<g;h++)d.push({name:c,value:f[h]});else null!==f&&"undefined"!=typeof f&&d.push({name:this.name,value:f})}});return b.param(d)};b.fn.fieldValue=function(a){for(var d=[],c=0,f=this.length;c<f;c++){var h=b.fieldValue(this[c],a);null===h||"undefined"==typeof h||h.constructor==Array&&!h.length||(h.constructor==Array?b.merge(d,h):d.push(h))}return d};
b.fieldValue=function(a,d){var c=a.name,f=a.type,h=a.tagName.toLowerCase();void 0===d&&(d=!0);if(d&&(!c||a.disabled||"reset"==f||"button"==f||("checkbox"==f||"radio"==f)&&!a.checked||("submit"==f||"image"==f)&&a.form&&a.form.clk!=a||"select"==h&&-1==a.selectedIndex))return null;if("select"==h){h=a.selectedIndex;if(0>h)return null;d=[];a=a.options;c=(f="select-one"==f)?h+1:a.length;for(h=f?h:0;h<c;h++){var g=a[h];if(g.selected){var n=g.value;n||(n=g.attributes&&g.attributes.value&&!g.attributes.value.specified?
g.text:g.value);if(f)return n;d.push(n)}}return d}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,f=this.tagName.toLowerCase();d.test(c)||"textarea"==f?this.value="":"checkbox"==c||"radio"==c?this.checked=!1:"select"==f?this.selectedIndex=
-1:"file"==c?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(c)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var d=
this.type;"checkbox"==d||"radio"==d?this.checked=a:"option"==this.tagName.toLowerCase()&&(d=b(this).parent("select"),a&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});